<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password | DNA-Based Credibility System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white shadow">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center">
                <img src="SEALbg.png" alt="DNA Logo" width="100px">
            </div>
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="index.html" class="text-gray-600 hover:text-blue-600">Home</a></li>
                    <li><a href="about.html" class="text-gray-600 hover:text-blue-600">About</a></li>
                    <li><a href="contact.html" class="text-gray-600 hover:text-blue-600">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow flex items-center justify-center px-4 py-12">
        <div class="max-w-md w-full space-y-8 bg-white p-10 rounded-lg shadow-md">
            <div class="text-center">
                <h2 class="mt-6 text-3xl font-extrabold text-gray-900">
                    Reset Your Password
                </h2>
                <p class="mt-2 text-sm text-gray-600">
                    Enter your email to receive a password reset link
                </p>
            </div>
            
            <!-- Step 1: Email Entry Form (visible by default) -->
            <div id="step-email" class="mt-8">
                <form class="space-y-6" action="#" method="POST">
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">
                            Email address
                        </label>
                        <div class="mt-1 relative rounded-md shadow-sm">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-envelope text-pink-400"></i>
                            </div>
                            <input id="email" name="email" type="email" autocomplete="email" required 
                                   class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md 
                                   focus:outline-none focus:ring-blue-500 focus:border-pink-500" 
                                   placeholder="you@example.com">
                        </div>
                    </div>

                    <!-- Security Question (Optional) -->
                    <div>
                        <label for="security-question" class="block text-sm font-medium text-gray-700">
                            Security Question
                        </label>
                        <select id="security-question" name="security-question" 
                                class="mt-1 block w-full pl-3 pr-10 py-3 border border-pink-300 
                                rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Select a security question</option>
                            <option>What was the name of your first pet?</option>
                            <option>In what city were you born?</option>
                            <option>What is your mother's maiden name?</option>
                            <option>What high school did you attend?</option>
                        </select>
                    </div>

                    <div>
                        <label for="security-answer" class="block text-sm font-medium text-gray-700">
                            Answer
                        </label>
                        <input id="security-answer" name="security-answer" type="text" 
                               class="mt-1 block w-full pl-3 pr-3 py-3 border border-gray-300 
                               rounded-md focus:outline-none focus:ring-blue-500 focus:border-pink-500">
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="text-sm">
                            <a href="login.html" class="font-medium text-pink-600 hover:text-blue-500">
                                Back to login
                            </a>
                        </div>
                    </div>

                    <div>
                        <button type="button" onclick="showVerificationStep()"
                                class="group relative w-full flex justify-center py-3 px-4 border 
                                border-transparent text-sm font-medium rounded-md text-white 
                                bg-pink-600 hover:bg-green-700 focus:outline-none focus:ring-2 
                                focus:ring-offset-2 focus:ring-blue-500">
                            Send Reset Link
                        </button>
                    </div>
                </form>
            </div>

            <!-- Step 2: Verification Code (hidden by default) -->
            <div id="step-verification" class="mt-8 hidden">
                <div class="rounded-md bg-blue-50 p-4 mb-6">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-blue-400"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm text-blue-700">
                                We've sent a verification code to your email. Please check your inbox and enter the code below.
                            </p>
                        </div>
                    </div>
                </div>
                
                <form class="space-y-6" action="#" method="POST">
                    <div>
                        <label for="verification-code" class="block text-sm font-medium text-gray-700">
                            Verification Code
                        </label>
                        <div class="mt-1 flex justify-between">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="text-sm">
                            <button type="button" onclick="showEmailStep()" class="font-medium text-pink-600 hover:text-black-500">
                                Back
                            </button>
                        </div>
                        <div class="text-sm">
                            <a href="#" class="font-medium text-pink-600 hover:text-black-500">
                                Resend code
                            </a>
                        </div>
                    </div>

                    <div>
                        <button type="button" onclick="showNewPasswordStep()"
                                class="group relative w-full flex justify-center py-3 px-4 border 
                                border-transparent text-sm font-medium rounded-md text-white 
                                bg-pink-600 hover:bg-green-700 focus:outline-none focus:ring-2 
                                focus:ring-offset-2 focus:ring-blue-500">
                            Verify Code
                        </button>
                    </div>
                </form>
            </div>

            <!-- Step 3: New Password (hidden by default) -->
            <div id="step-new-password" class="mt-8 hidden">
                <form class="space-y-6" action="#" method="POST">
                    <div>
                        <label for="new-password" class="block text-sm font-medium text-gray-700">
                            New Password
                        </label>
                        <div class="mt-1 relative rounded-md shadow-sm">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-gray-400"></i>
                            </div>
                            <input id="new-password" name="new-password" type="password" required 
                                   class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md 
                                   focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="mt-1">
                            <div class="text-xs text-gray-500">Password must contain:</div>
                            <ul class="mt-1 text-xs space-y-1">
                                <li class="text-green-600"><i class="fas fa-check-circle mr-1"></i> At least 8 characters</li>
                                <li class="text-green-600"><i class="fas fa-check-circle mr-1"></i> At least one uppercase letter</li>
                                <li class="text-red-600"><i class="fas fa-times-circle mr-1"></i> At least one number</li>
                                <li class="text-red-600"><i class="fas fa-times-circle mr-1"></i> At least one special character</li>
                            </ul>
                        </div>
                    </div>

                    <div>
                        <label for="confirm-password" class="block text-sm font-medium text-gray-700">
                            Confirm Password
                        </label>
                        <div class="mt-1 relative rounded-md shadow-sm">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-gray-400"></i>
                            </div>
                            <input id="confirm-password" name="confirm-password" type="password" required 
                                   class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md 
                                   focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="text-sm">
                            <button type="button" onclick="showVerificationStep()" class="font-medium text-pink-600 hover:text-blue-500">
                                Back
                            </button>
                        </div>
                    </div>

                    <div>
                        <button type="button" onclick="showSuccessStep()"
                                class="group relative w-full flex justify-center py-3 px-4 border 
                                border-transparent text-sm font-medium rounded-md text-white 
                                bg-pink-600 hover:bg-green-700 focus:outline-none focus:ring-2 
                                focus:ring-offset-2 focus:ring-blue-500">
                            Reset Password
                        </button>
                    </div>
                </form>
            </div>

            <!-- Step 4: Success Message (hidden by default) -->
            <div id="step-success" class="mt-8 hidden">
                <div class="text-center">
                    <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100">
                        <i class="fas fa-check text-green-600 text-xl"></i>
                    </div>
                    <h3 class="mt-3 text-lg font-medium text-gray-900">Password Reset Successful</h3>
                    <p class="mt-2 text-sm text-gray-500">
                        Your password has been successfully reset. You can now log in with your new password.
                    </p>
                    <div class="mt-5">
                        <a href="login.html" 
                           class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md 
                           shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 
                           focus:ring-offset-2 focus:ring-blue-500">
                            Go to Login
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white py-4 border-t">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-sm text-gray-600">Â© 2025 SEALit. All rights reserved.</p>
                </div>
                <div class="flex space-x-4">
                    <a href="about.html" class="text-sm text-gray-600 hover:text-blue-600">Terms</a>
                    <a href="about.html" class="text-sm text-gray-600 hover:text-blue-600">Privacy</a>
                    <a href="chatbot.html" class="text-sm text-gray-600 hover:text-blue-600">Help</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Functions to handle form step transitions
        function showEmailStep() {
            document.getElementById('step-email').classList.remove('hidden');
            document.getElementById('step-verification').classList.add('hidden');
            document.getElementById('step-new-password').classList.add('hidden');
            document.getElementById('step-success').classList.add('hidden');
        }
        
        function showVerificationStep() {
            document.getElementById('step-email').classList.add('hidden');
            document.getElementById('step-verification').classList.remove('hidden');
            document.getElementById('step-new-password').classList.add('hidden');
            document.getElementById('step-success').classList.add('hidden');
        }
        
        function showNewPasswordStep() {
            document.getElementById('step-email').classList.add('hidden');
            document.getElementById('step-verification').classList.add('hidden');
            document.getElementById('step-new-password').classList.remove('hidden');
            document.getElementById('step-success').classList.add('hidden');
        }
        
        function showSuccessStep() {
            document.getElementById('step-email').classList.add('hidden');
            document.getElementById('step-verification').classList.add('hidden');
            document.getElementById('step-new-password').classList.add('hidden');
            document.getElementById('step-success').classList.remove('hidden');
        }
        
        // Auto-focus next input in verification code section
        document.addEventListener('DOMContentLoaded', function() {
            const codeInputs = document.querySelectorAll('#step-verification input[type="text"]');
            
            codeInputs.forEach((input, index) => {
                input.addEventListener('keyup', function() {
                    if (this.value.length === this.maxLength && index < codeInputs.length - 1) {
                        codeInputs[index + 1].focus();
                    }
                });
            });
        });
    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("resetForm").addEventListener("submit", async function (event) {
            event.preventDefault();

            const email = document.getElementById("email").value;
            try {
                const response = await fetch("http://your-backend-url/api/auth/reset-password", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ email })
                });

                const data = await response.json();

                if (response.ok) {
                    alert("Reset link sent to your email!");
                    document.getElementById("step-email").style.display = "none";
                    document.getElementById("step-verification").style.display = "block";
                } else {
                    alert("Error: " + data.error);
                }
            } catch (error) {
                alert("Request failed: " + error.message);
            }
        });

        document.getElementById("verifyForm").addEventListener("submit", async function (event) {
            event.preventDefault();

            const code = document.getElementById("verification-code").value;
            const newPassword = document.getElementById("newPassword").value;

            try {
                const response = await fetch("http://your-backend-url/api/auth/verify-reset", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ code, newPassword })
                });

                const data = await response.json();

                if (response.ok) {
                    alert("Password reset successful! Redirecting to login...");
                    window.location.href = "login.html";
                } else {
                    alert("Error: " + data.error);
                }
            } catch (error) {
                alert("Request failed: " + error.message);
            }
        });
    });
</script>
</body>
</html>